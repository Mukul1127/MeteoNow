---
/*
  MeteoWeather is a Accurate Weather App 
  Copyright (C) 2024 Mukul Kedia

  MeteoWeather is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published
  by the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  MeteoWeather is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with MeteoWeather. If not, see <https://www.gnu.org/licenses/>.
*/
---

<nav class="bg-gray-700 dark:bg-gray-950 fixed w-screen z-20 top-0 start-0 border-b border-gray-800">
  <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
    <a href="/" class="flex items-center space-x-3 rtl:space-x-reverse dark:hover:bg-gray-900 hover:bg-gray-600 px-2 py-1 rounded transition-all motion-reduce:transition-none">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="h-8 w-8"><path fill="white" d="M0 336c0 79.5 64.5 144 144 144H512c70.7 0 128-57.3 128-128c0-61.9-44-113.6-102.4-125.4c4.1-10.7 6.4-22.4 6.4-34.6c0-53-43-96-96-96c-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32C167.6 32 96 103.6 96 192c0 2.7 .1 5.4 .2 8.1C40.2 219.8 0 273.2 0 336z"/></svg>
      <span class="self-center text-2xl font-semibold whitespace-nowrap text-white">MeteoWeather</span>
    </a>
    <button id="toggleNav" type="button" class="transiton-all inline-flex items-center p-2 w-10 h-10 justify-center text-md rounded-md md:hidden focus:outline-none focus:ring-2 text-gray-400 hover:bg-gray-600 focus:right-gray-700 dark:hover:bg-gray-900 dark:focus:ring-gray-800" aria-expanded="false">
      <span class="sr-only">Open Main Menu</span>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="h-6 w-6"><path fill="currentColor" d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>
    </button>

    { /* Navigation Buttons */ }
    <div class="hidden w-full md:block md:w-auto" id="list">
      <ul class="p-1 flex flex-col font-medium mt-4 rounded-md bg-gray-600 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 dark:bg-gray-900 dark:border-gray-700">
        <li>
          <a href="/Current" class="transition-all motion-reduce:transition-none block py-2 px-3 md:py-1 md:px-2 text-white rounded dark:hover:bg-gray-600 hover:bg-gray-500">
            <div class="flex flex-row items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="h-4 w-4"><path fill="currentColor" d="M128 0c17.7 0 32 14.3 32 32V64H288V32c0-17.7 14.3-32 32-32s32 14.3 32 32V64h48c26.5 0 48 21.5 48 48v48H0V112C0 85.5 21.5 64 48 64H96V32c0-17.7 14.3-32 32-32zM0 192H448V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V192zm80 64c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16h96c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H80z"/></svg>
              Current Weather
            </div>
          </a>
        </li>
        <li>
          <a href="/Week" class="transition-all motion-reduce:transition-none block py-2 px-3 md:py-1 md:px-2 text-white rounded dark:hover:bg-gray-600 hover:bg-gray-500">
            <div class="flex flex-row items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="h-4 w-4"><path fill="currentColor" d="M128 0c17.7 0 32 14.3 32 32V64H288V32c0-17.7 14.3-32 32-32s32 14.3 32 32V64h48c26.5 0 48 21.5 48 48v48H0V112C0 85.5 21.5 64 48 64H96V32c0-17.7 14.3-32 32-32zM0 192H448V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V192zm80 64c-8.8 0-16 7.2-16 16v64c0 8.8 7.2 16 16 16H368c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H80z"/></svg>
              Week's Weather
            </div>
          </a>
        </li>
        <button class="transition-all motion-reduce:transition-none flex flex-row items-center gap-2 py-2 px-3 md:py-1 md:px-2 text-white rounded dark:hover:bg-gray-600 hover:bg-gray-500" id="toggleTheme">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="hidden dark:block h-4 w-4"><path fill="white" d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"/></svg>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="dark:hidden h-4 w-4"><path fill="white" d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"/></svg>
          <h1 class="md:hidden">Toggle Theme</h1>
        </button>
        <button class="transition-all motion-reduce:transition-none flex flex-row items-center gap-2 py-2 px-3 md:py-1 md:px-2 text-white rounded dark:hover:bg-gray-600 hover:bg-gray-500" onclick="settingsModal.showModal()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="h-4 w-4"><path fill="currentColor" d="M0 416c0 17.7 14.3 32 32 32l54.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48L480 448c17.7 0 32-14.3 32-32s-14.3-32-32-32l-246.7 0c-12.3-28.3-40.5-48-73.3-48s-61 19.7-73.3 48L32 384c-17.7 0-32 14.3-32 32zm128 0a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zM320 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm32-80c-32.8 0-61 19.7-73.3 48L32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l246.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48l54.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-54.7 0c-12.3-28.3-40.5-48-73.3-48zM192 128a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm73.3-64C253 35.7 224.8 16 192 16s-61 19.7-73.3 48L32 64C14.3 64 0 78.3 0 96s14.3 32 32 32l86.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48L480 128c17.7 0 32-14.3 32-32s-14.3-32-32-32L265.3 64z"/></svg>
          <h1 class="md:hidden">Change Settings</h1>
        </button>
        <a href="https://www.github.com/Mukul1127/MeteoWeather/" class="transition-all motion-reduce:transition-none flex flex-row items-center gap-2 py-2 px-3 md:py-1 md:px-2 text-white rounded dark:hover:bg-gray-600 hover:bg-gray-500">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="h-5 w-5"><path fill="currentColor" d="M439.6 236.1L244 40.5a28.9 28.9 0 0 0 -40.8 0l-40.7 40.6 51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.2 199v121.9c25.3 12.5 22.3 41.9 9.1 55a34.3 34.3 0 0 1 -48.6 0c-17.6-17.6-11.1-46.9 11.3-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1a28.9 28.9 0 0 0 0 40.8l195.6 195.6a28.9 28.9 0 0 0 40.8 0l194.7-194.7a28.9 28.9 0 0 0 0-40.8z"/></svg>
          <h1 class="md:hidden">Source Code</h1>
        </a>
      </ul>
    </div>
  </div>
</nav>

<script>
  function setup() {
    const docList = document.documentElement.classList,
      themeButton = document.getElementById("toggleTheme")!,
      classList = document.getElementById("list")!.classList,
      navButton = document.getElementById("toggleNav")!;

    // Theme
    if (localStorage.getItem("theme") === "dark" || (!("theme" in localStorage) && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
      docList.add("dark");
      localStorage.setItem("theme", "dark");
    } else {
      docList.remove("dark");
      localStorage.setItem("theme", "light");
    };

    themeButton.addEventListener("click", () => {
      if (docList.contains("dark")) {
        docList.remove("dark")
        localStorage.setItem("theme", "light")
      } else {
        docList.add("dark")
        localStorage.setItem("theme", "dark")
      };
    });

    // Navigation
    navButton.addEventListener("click", () => {
      if (classList.contains("hidden")) {
        classList.remove("hidden")
        navButton.ariaExpanded = "true"
      } else {
        classList.add("hidden")
        navButton.ariaExpanded = "false"
      };
    });
  };

  setup();
  document.addEventListener("astro:after-swap", setup);
</script>