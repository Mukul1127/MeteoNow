---
/*
  MeteoWeather is a Accurate Weather App 
  Copyright (C) 2024 Mukul Kedia

  MeteoWeather is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published
  by the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  MeteoWeather is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with MeteoWeather. If not, see <https://www.gnu.org/licenses/>.
*/
---

<nav class="bg-gray-700 dark:bg-gray-950 fixed w-screen z-20 top-0 start-0 border-b border-gray-800">
  <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-2">
    <a href="/" class="flex items-center space-x-3 rtl:space-x-reverse dark:hover:bg-gray-900 hover:bg-gray-600 py-2 px-4 active:scale-90 rounded transition-all motion-reduce:transition-none">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="h-8 w-8"><path fill="white" d="M0 336c0 79.5 64.5 144 144 144H512c70.7 0 128-57.3 128-128c0-61.9-44-113.6-102.4-125.4c4.1-10.7 6.4-22.4 6.4-34.6c0-53-43-96-96-96c-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32C167.6 32 96 103.6 96 192c0 2.7 .1 5.4 .2 8.1C40.2 219.8 0 273.2 0 336z"/></svg>
      <span class="self-center text-2xl font-semibold whitespace-nowrap text-white">MeteoWeather</span>
    </a>
    <button id="toggleNav" type="button" class="active:scale-95 transition-all motion-reduce:transition-none p-2 w-10 h-10 text-md rounded-md md:hidden text-gray-400 hover:bg-gray-600 dark:hover:bg-gray-900" aria-expanded="false">
      <span class="sr-only">Open Main Menu</span>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="h-6 w-6"><path fill="currentColor" d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>
    </button>

    { /* Navigation Buttons */ }
    <div class="hidden w-full md:block md:w-auto" id="list">
      <ul class="p-2 md:p-1 flex flex-col font-medium mt-2 mx-1 mb-1 md:m-0 space-y-1 md:space-y-0 rounded-md bg-gray-600 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 dark:bg-gray-900 dark:border-gray-700">
        <li>
          <a href="/Current" class="active:scale-95 transition-all motion-reduce:transition-none block py-2 px-3 md:py-1 md:px-2 text-white rounded dark:hover:bg-gray-600 hover:bg-gray-500">
            <div class="flex flex-row items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="h-4 w-4"><path fill="currentColor" d="M128 0c17.7 0 32 14.3 32 32V64H288V32c0-17.7 14.3-32 32-32s32 14.3 32 32V64h48c26.5 0 48 21.5 48 48v48H0V112C0 85.5 21.5 64 48 64H96V32c0-17.7 14.3-32 32-32zM0 192H448V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V192zm80 64c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16h96c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H80z"/></svg>
              Current Weather
            </div>
          </a>
        </li>
        <li>
          <a href="/Week" class="active:scale-95 transition-all motion-reduce:transition-none block py-2 px-3 md:py-1 md:px-2 text-white rounded dark:hover:bg-gray-600 hover:bg-gray-500">
            <div class="flex flex-row items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="h-4 w-4"><path fill="currentColor" d="M128 0c17.7 0 32 14.3 32 32V64H288V32c0-17.7 14.3-32 32-32s32 14.3 32 32V64h48c26.5 0 48 21.5 48 48v48H0V112C0 85.5 21.5 64 48 64H96V32c0-17.7 14.3-32 32-32zM0 192H448V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V192zm80 64c-8.8 0-16 7.2-16 16v64c0 8.8 7.2 16 16 16H368c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H80z"/></svg>
              Week's Weather
            </div>
          </a>
        </li>
        <button class="active:scale-95 transition-all motion-reduce:transition-none flex flex-row items-center gap-2 py-2 px-3 md:py-1 md:px-2 text-white rounded dark:hover:bg-gray-600 hover:bg-gray-500" id="toggleTheme">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="hidden dark:block h-4.5 w-4.5"><path fill="white" d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"/></svg>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="dark:hidden h-4.5 w-4.5"><path fill="white" d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"/></svg>
          <h1 class="md:hidden">Toggle Theme</h1>
        </button>
        <button class="active:scale-95 transition-all motion-reduce:transition-none flex flex-row items-center gap-2 py-2 px-3 md:py-1 md:px-2 text-white rounded dark:hover:bg-gray-600 hover:bg-gray-500" onclick="settingsModal.showModal()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="h-4.5 w-4.5"><path fill="currentColor" d="M496 167c3 8 0 18-7 24l-43 40a193 193 0 0 1 0 50l43 40c7 6 10 16 7 24l-16 35-5 8c-6 11-14 21-22 31-6 7-15 10-24 7l-56-18c-13 10-28 19-44 26l-12 57c-2 9-9 16-19 17a258 258 0 0 1-85 0c-9-1-16-8-18-17l-12-57c-16-7-31-16-44-26l-56 18c-9 3-19 0-24-7-9-10-16-20-23-31l-4-8c-6-11-12-23-16-35-3-8-1-18 6-24l44-40a196 196 0 0 1 0-50l-44-40c-7-6-9-16-6-24 4-12 10-24 16-35l4-8 23-31c6-7 15-10 24-7l56 18c13-10 28-19 44-25l12-58c2-9 9-16 19-17a248 248 0 0 1 85 0c9 1 16 8 18 17l12 57c16 7 31 16 44 26l56-18c9-3 18 0 24 7 8 10 16 20 22 31l5 8c6 11 12 23 16 35zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"/></svg>
          <h1 class="md:hidden">Change Settings</h1>
        </button>
        <a href="https://www.github.com/Mukul1127/MeteoWeather/" class="active:scale-95 transition-all motion-reduce:transition-none flex flex-row items-center gap-2 py-2 px-3 md:py-1 md:px-2 text-white rounded dark:hover:bg-gray-600 hover:bg-gray-500">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="h-5 w-5"><path fill="currentColor" d="M166 397c0 2-2 4-5 4-4 0-6-1-6-4 0-2 2-3 5-3 3-1 6 1 6 3zm-31-4c-1 2 1 4 4 5s6 0 6-2-1-5-4-5c-3-1-5 0-6 2zm44-2c-3 1-5 3-5 5 1 2 3 3 6 3 3-1 5-3 5-5s-3-3-6-3zM245 8A240 240 0 0 0 0 252c0 111 70 206 170 239 12 2 17-5 17-12v-61s-70 15-85-30c0 0-12-29-28-37 0 0-23-15 2-15 0 0 24 2 38 26 22 38 59 27 73 21 2-16 9-28 16-34-56-6-112-14-112-111 0-27 7-41 23-59-2-6-11-33 3-67 21-7 69 27 69 27a237 237 0 0 1 126 0s48-34 69-27c13 34 5 61 2 67 16 18 26 32 26 59 0 97-59 105-115 111 9 8 17 23 17 46v84c0 6 5 14 17 12a248 248 0 0 0 168-239C496 113 384 8 245 8zM97 353c-1 1-1 3 1 5 1 2 4 2 5 1s1-3-1-5c-1-2-4-2-5-1zm-11-8 3 4c1 1 3 0 4-1s0-3-2-4-4 0-5 1zm33 35c-2 2-1 5 1 7s5 2 7 1c1-2 0-5-2-7s-5-2-6-1zm-12-14v6c2 2 5 3 6 2 2-1 2-4 0-6-1-3-4-4-6-2z"/></svg>
          <h1 class="md:hidden">Source Code</h1>
        </a>
      </ul>
    </div>
  </div>
</nav>

<script>
  function setup() {
    const docList = document.documentElement.classList,
      themeButton = document.getElementById("toggleTheme")! as HTMLButtonElement,
      classList = document.getElementById("list")!.classList,
      navButton = document.getElementById("toggleNav")! as HTMLButtonElement;

    // Theme
    if (localStorage.getItem("theme") === "dark" || (!("theme" in localStorage) && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
      docList.add("dark");
      localStorage.setItem("theme", "dark");
    } else {
      docList.remove("dark");
      localStorage.setItem("theme", "light");
    };

    themeButton.addEventListener("click", () => {
      if (docList.contains("dark")) {
        docList.remove("dark")
        localStorage.setItem("theme", "light")
      } else {
        docList.add("dark")
        localStorage.setItem("theme", "dark")
      };
    });

    // Navigation
    navButton.addEventListener("click", () => {
      if (classList.contains("hidden")) {
        classList.remove("hidden")
        navButton.ariaExpanded = "true"
      } else {
        classList.add("hidden")
        navButton.ariaExpanded = "false"
      };
    });
  };

  setup();
  document.addEventListener("astro:after-swap", setup);
</script>